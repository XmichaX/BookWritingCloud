<div id="partial-page-wrapper">


  <div class="row">
    <div class="col-lg-12">
      <div class="page-header">
        <h1 id="Book">Book: <%= @book.title %></h1>
      </div>
    </div>
  </div>
  <!-- /.row -->


  <div class="row">
    <div class="col-lg-12 text-left">
      <h1>Details</h1>

      <div class="row">
        <div class="col-lg-12">
          <%= render 'books/bookbar' %>
        </div>
      </div>
      <!-- /.row -->

      <div class="row">
        <div class="col-lg-12">
          <p>
            <b><%= Book.human_attribute_name(:edition) %>:</b>
            <%= @book.edition %>
          </p>

          <% if @book.published? %>
              <p>
                <b><%= Book.human_attribute_name(:published) %>:</b>
                <%= @book.published %>
              </p>
          <% end %>

          <p>
            <b><%= Book.human_attribute_name(:genre) %>:</b>
            <%= @book.genre %>
          </p>

          <p>
            <b><%= Book.human_attribute_name(:tags) %>:</b>
            <%= @book.tags %>
          </p>

          <p>
            <b><%= Book.human_attribute_name(:users) %>:</b>
            <%= @book.users_list_real_names %>
          </p>
        </div>
      </div>
      <!-- /.row -->

    </div>


    <div class="col-lg-12 text-left">
    <h2>Chunks</h2>
          <%= render 'chunks/filterbar' %>
          <% if @book.has_chunks? %>
              <table>
                <tr>
                  <th><%= Chunk.human_attribute_name(:title) %></th>
                  <th><%= Chunk.human_attribute_name(:section) %></th>
                  <th><%= Chunk.human_attribute_name(:user) %></th>
                  <th><%= Chunk.human_attribute_name(:version) %></th>
                  <% unless @book.closed? %>
                      <th></th>
                  <% end %>
                </tr>
                <% @book.chunks.each do |chunk| %>
                    <tr>
                      <td><%= link_to chunk.title, @book.closed? ? book_chunk_path(@book, chunk) : edit_book_chunk_path(@book, chunk) %></td>
                      <td><%= chunk.section %></td>
                      <td><%= chunk.username %></td>
                      <td><%= chunk.versions.last.id unless chunk.versions == nil %></td>
                      <% unless @book.closed? %>
                          <td><%= button_to I18n.t('views.destroy'), book_chunk_path(@book, chunk), method: :delete, data: {confirm: I18n.t('views.are_you_sure')} %> </td>
                      <% end %>
                    </tr>
                <% end %>
              </table>


    <% else %>

          <div class="col-lg-4">
            <div class="alert alert-dismissable alert-danger">
              <button type="button" class="close" data-dismiss="alert">&times;</button>
              <strong><p><%= I18n.t('views.chunk.index.empty') %></p></strong>
              <a href="#" class="alert-link">Change a few things up</a>.
            </div>
          </div>
      <% end %>
      <hr class="featurette-divider">
      <%= render partial: 'chunks/chunks_tree', :locals => {:books => user_books} %>
      <hr class="featurette-divider">

      <% unless @book.closed? %>


      <% end %>

          <br/><br/>

    </div>

  </div>
  <!-- /.row -->


</div>






